{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Packet = void 0;\nvar channel_1 = require(\"@terra-money/terra.proto/ibc/core/channel/v1/channel\");\nvar long_1 = __importDefault(require(\"long\"));\nvar json_1 = require(\"../../../../util/json\");\nvar Height_1 = require(\"../client/Height\");\n/** Packet defines a type that carries data across different chains through IBC */\nvar Packet = /** @class */function (_super) {\n  __extends(Packet, _super);\n  /**\n   * @param port_id port on the counterparty chain which owns the other end of the channel.\n   * @param channel_id channel end on the counterparty chain\n   */\n  function Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height, timeout_timestamp) {\n    var _this = _super.call(this) || this;\n    _this.sequence = sequence;\n    _this.source_port = source_port;\n    _this.source_channel = source_channel;\n    _this.destination_port = destination_port;\n    _this.destination_channel = destination_channel;\n    _this.data = data;\n    _this.timeout_height = timeout_height;\n    _this.timeout_timestamp = timeout_timestamp;\n    return _this;\n  }\n  Packet.fromAmino = function (_data) {\n    var sequence = _data.sequence,\n      source_port = _data.source_port,\n      source_channel = _data.source_channel,\n      destination_port = _data.destination_port,\n      destination_channel = _data.destination_channel,\n      data = _data.data,\n      timeout_height = _data.timeout_height,\n      timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromAmino(timeout_height) : undefined, timeout_timestamp);\n  };\n  Packet.prototype.toAmino = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toAmino() : undefined,\n      timeout_timestamp: timeout_timestamp\n    };\n    return res;\n  };\n  Packet.fromData = function (_data) {\n    var sequence = _data.sequence,\n      source_port = _data.source_port,\n      source_channel = _data.source_channel,\n      destination_port = _data.destination_port,\n      destination_channel = _data.destination_channel,\n      data = _data.data,\n      timeout_height = _data.timeout_height,\n      timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromData(timeout_height) : undefined, Number.parseInt(timeout_timestamp));\n  };\n  Packet.prototype.toData = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toData() : undefined,\n      timeout_timestamp: timeout_timestamp.toFixed()\n    };\n    return res;\n  };\n  Packet.fromProto = function (proto) {\n    return new Packet(proto.sequence.toNumber(), proto.sourcePort, proto.sourceChannel, proto.destinationPort, proto.destinationChannel, Buffer.from(proto.data).toString('base64'), proto.timeoutHeight ? Height_1.Height.fromProto(proto.timeoutHeight) : undefined, proto.timeoutTimestamp.toNumber());\n  };\n  Packet.prototype.toProto = function () {\n    var _a = this,\n      sequence = _a.sequence,\n      source_port = _a.source_port,\n      source_channel = _a.source_channel,\n      destination_port = _a.destination_port,\n      destination_channel = _a.destination_channel,\n      data = _a.data,\n      timeout_height = _a.timeout_height,\n      timeout_timestamp = _a.timeout_timestamp;\n    return channel_1.Packet.fromPartial({\n      sequence: long_1.default.fromNumber(sequence),\n      sourcePort: source_port,\n      sourceChannel: source_channel,\n      destinationPort: destination_port,\n      destinationChannel: destination_channel,\n      data: Buffer.from(data, 'base64'),\n      timeoutHeight: timeout_height ? timeout_height.toProto() : undefined,\n      timeoutTimestamp: long_1.default.fromNumber(timeout_timestamp)\n    });\n  };\n  return Packet;\n}(json_1.JSONSerializable);\nexports.Packet = Packet;\n//# sourceMappingURL=Packet.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}