{"ast":null,"code":"import { TaskExec } from '../common/tesk-exec/task-exec';\nexport function memoizify(originalMethod, input) {\n  const defaultConfig = {\n    cache: new Map()\n  };\n  const runner = new TaskExec();\n  let resolvedConfig = Object.assign({}, defaultConfig);\n  if (typeof input === 'number') {\n    resolvedConfig.expirationTimeMs = input;\n  } else {\n    resolvedConfig = Object.assign(Object.assign({}, resolvedConfig), input);\n  }\n  return function (...args) {\n    const keyResolver = typeof resolvedConfig.keyResolver === 'string' ? this[resolvedConfig.keyResolver].bind(this) : resolvedConfig.keyResolver;\n    const key = keyResolver ? keyResolver(...args) : JSON.stringify(args);\n    if (!resolvedConfig.cache.has(key)) {\n      const response = originalMethod.apply(this, args);\n      if (resolvedConfig.expirationTimeMs !== undefined) {\n        runner.exec(() => {\n          resolvedConfig.cache.delete(key);\n        }, resolvedConfig.expirationTimeMs);\n      }\n      resolvedConfig.cache.set(key, response);\n    }\n    return resolvedConfig.cache.get(key);\n  };\n}\n//# sourceMappingURL=memoizify.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}