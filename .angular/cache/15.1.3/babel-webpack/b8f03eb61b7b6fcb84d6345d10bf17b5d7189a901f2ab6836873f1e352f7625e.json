{"ast":null,"code":"import TinyQueue from 'tinyqueue';\nexport class TaskExec {\n  constructor() {\n    this.tasks = new TinyQueue([], (a, b) => a.execTime - b.execTime);\n  }\n  exec(func, ttl) {\n    this.tasks.push({\n      func,\n      execTime: Date.now() + ttl\n    });\n    this.handleNext();\n  }\n  handleNext() {\n    if (!this.tasks.length) {\n      return;\n    }\n    const {\n      execTime\n    } = this.tasks.peek();\n    this.execNext(Math.max(execTime - Date.now(), 0));\n  }\n  execNext(ttl) {\n    clearTimeout(this.handler);\n    this.handler = setTimeout(() => {\n      const {\n        func\n      } = this.tasks.pop();\n      func();\n      this.handleNext();\n    }, ttl);\n  }\n}\n//# sourceMappingURL=task-exec.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}