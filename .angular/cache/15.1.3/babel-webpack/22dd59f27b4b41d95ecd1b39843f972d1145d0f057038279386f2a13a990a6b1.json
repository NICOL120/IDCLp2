{"ast":null,"code":"import { Queue } from '../common/data-stractures/queue';\nexport class ThrottleAsyncExecutor {\n  constructor(fun, parallelCalls) {\n    this.fun = fun;\n    this.parallelCalls = parallelCalls;\n    this.onGoingCallsCount = 0;\n    this.callsToRun = new Queue();\n  }\n  exec(context, args) {\n    const callArgs = {\n      context,\n      args,\n      resolve: null,\n      reject: null\n    };\n    this.callsToRun.enqueue(callArgs);\n    const proms = new Promise((resolve, reject) => {\n      callArgs.resolve = resolve;\n      callArgs.reject = reject;\n    });\n    this.tryCall();\n    proms.hell = args[0];\n    return proms;\n  }\n  tryCall() {\n    if (this.callsToRun.getSize() > 0 && this.onGoingCallsCount < this.parallelCalls) {\n      const {\n        context,\n        args,\n        resolve,\n        reject\n      } = this.callsToRun.dequeue();\n      this.onGoingCallsCount += 1;\n      this.fun.apply(context, args).then(resolve).catch(reject).finally(() => {\n        this.onGoingCallsCount -= 1;\n        this.tryCall();\n      });\n    }\n  }\n}\n//# sourceMappingURL=throttle-async-executor.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}