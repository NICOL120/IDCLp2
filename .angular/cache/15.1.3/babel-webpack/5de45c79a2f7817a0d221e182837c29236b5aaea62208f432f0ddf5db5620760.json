{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Header = void 0;\nvar json_1 = require(\"../../../../util/json\");\nvar tendermint_1 = require(\"@terra-money/terra.proto/ibc/lightclients/tendermint/v1/tendermint\");\nvar Height_1 = require(\"../../core/client/Height\");\nvar types_1 = require(\"../../msgs/client/tendermint/types\");\nvar any_1 = require(\"@terra-money/terra.proto/google/protobuf/any\");\n/**\n * Header defines the Tendermint client consensus Header.\n * It encapsulates all the information necessary to update from a trusted\n * Tendermint ConsensusState. The inclusion of TrustedHeight and\n * TrustedValidators allows this update to process correctly, so long as the\n * ConsensusState for the TrustedHeight exists, this removes race conditions\n * among relayers The SignedHeader and ValidatorSet are the new untrusted update\n * fields for the client. The TrustedHeight is the height of a stored\n * ConsensusState on the client that will be used to verify the new untrusted\n * header. The Trusted ConsensusState must be within the unbonding period of\n * current time in order to correctly verify, and the TrustedValidators must\n * hash to TrustedConsensusState.NextValidatorsHash since that is the last\n * trusted validator set at the TrustedHeight.\n */\nvar Header = /** @class */function (_super) {\n  __extends(Header, _super);\n  /**\n   * @param signedHeader\n   * @param validatorSet\n   * @param trustedHeight\n   * @param trustedValidators\n   */\n  function Header(signedHeader, validatorSet, trustedHeight, trustedValidators) {\n    var _this = _super.call(this) || this;\n    _this.signedHeader = signedHeader;\n    _this.validatorSet = validatorSet;\n    _this.trustedHeight = trustedHeight;\n    _this.trustedValidators = trustedValidators;\n    return _this;\n  }\n  Header.fromAmino = function (_) {\n    _;\n    throw new Error('Amino not supported');\n  };\n  Header.prototype.toAmino = function () {\n    throw new Error('Amino not supported');\n  };\n  Header.fromData = function (data) {\n    var signedHeader = data.signed_header,\n      validatorSet = data.validator_set,\n      trustedHeight = data.trusted_height,\n      trustedValidators = data.trusted_validators;\n    return new Header(signedHeader ? types_1.SignedHeader.fromData(signedHeader) : undefined, validatorSet ? types_1.ValidatorSet.fromData(validatorSet) : undefined, trustedHeight ? Height_1.Height.fromData(trustedHeight) : undefined, trustedValidators ? types_1.ValidatorSet.fromData(trustedValidators) : undefined);\n  };\n  Header.prototype.toData = function () {\n    var _a = this,\n      signedHeader = _a.signedHeader,\n      validatorSet = _a.validatorSet,\n      trustedHeight = _a.trustedHeight,\n      trustedValidators = _a.trustedValidators;\n    return {\n      signed_header: (signedHeader === null || signedHeader === void 0 ? void 0 : signedHeader.toData()) || undefined,\n      validator_set: (validatorSet === null || validatorSet === void 0 ? void 0 : validatorSet.toData()) || undefined,\n      trusted_height: (trustedHeight === null || trustedHeight === void 0 ? void 0 : trustedHeight.toData()) || undefined,\n      trusted_validators: (trustedValidators === null || trustedValidators === void 0 ? void 0 : trustedValidators.toData()) || undefined\n    };\n  };\n  Header.fromProto = function (proto) {\n    var signedHeader = proto.signedHeader,\n      validatorSet = proto.validatorSet,\n      trustedHeight = proto.trustedHeight,\n      trustedValidators = proto.trustedValidators;\n    return new Header(signedHeader ? types_1.SignedHeader.fromProto(signedHeader) : undefined, validatorSet ? types_1.ValidatorSet.fromProto(validatorSet) : undefined, trustedHeight ? Height_1.Height.fromProto(trustedHeight) : undefined, trustedValidators ? types_1.ValidatorSet.fromProto(trustedValidators) : undefined);\n  };\n  Header.prototype.toProto = function () {\n    var _a = this,\n      signedHeader = _a.signedHeader,\n      validatorSet = _a.validatorSet,\n      trustedHeight = _a.trustedHeight,\n      trustedValidators = _a.trustedValidators;\n    return tendermint_1.Header.fromPartial({\n      signedHeader: (signedHeader === null || signedHeader === void 0 ? void 0 : signedHeader.toProto()) || undefined,\n      validatorSet: (validatorSet === null || validatorSet === void 0 ? void 0 : validatorSet.toProto()) || undefined,\n      trustedHeight: (trustedHeight === null || trustedHeight === void 0 ? void 0 : trustedHeight.toProto()) || undefined,\n      trustedValidators: (trustedValidators === null || trustedValidators === void 0 ? void 0 : trustedValidators.toProto()) || undefined\n    });\n  };\n  Header.prototype.packAny = function () {\n    return any_1.Any.fromPartial({\n      typeUrl: 'ibc.lightclients.tendermint.v1.Header',\n      value: tendermint_1.Header.encode(this.toProto()).finish()\n    });\n  };\n  Header.unpackAny = function (msgAny) {\n    return Header.fromProto(tendermint_1.Header.decode(msgAny.value));\n  };\n  return Header;\n}(json_1.JSONSerializable);\nexports.Header = Header;\n//# sourceMappingURL=Header.js.map","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}